(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{36:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(5),c=t(3),o=t(1),a=t.n(o),u=t(0),i=function(e){var n=e.search,t=e.handleSearchChange;return Object(u.jsx)("div",{children:Object(u.jsx)("input",{className:"search",placeholder:"Search",type:"search",value:n,onChange:t})})},s=function(e){var n=e.text,t=e.component||"div";return Object(u.jsx)(t,{style:{paddingLeft:".5em"},children:n})},l=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:Object(u.jsx)("div",{className:"message ".concat(n?"success":"error"),children:n||t})},d=function(e){var n=e.newName,t=e.handleNameChange,r=e.addPerson,c=e.newNumber,o=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsx)("input",{placeholder:"Name",value:n,onChange:t}),Object(u.jsx)("input",{placeholder:"Number",value:c,onChange:o}),Object(u.jsx)("button",{type:"submit",children:"Add"})]})},h=function(e){var n=e.person,t=e.handleDelete;return Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:n.name}),Object(u.jsx)("span",{children:n.number}),Object(u.jsx)("span",{children:Object(u.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})})]})},b=function(e){var n=e.persons,t=e.handleDelete,r=e.loadingMessage;return Object(u.jsx)(u.Fragment,{children:n.length>0?Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)(h,{person:e,handleDelete:t},e.id)}))}):Object(u.jsx)("p",{children:r||"No Contacts ..."})})},f=t(4),m=t.n(f),j="/api/persons",p={getAll:function(){return m.a.get(j).then((function(e){return e.data}))},create:function(e){return m.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},v=(t(36),function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],a=n[1],h=Object(o.useState)(""),f=Object(c.a)(h,2),m=f[0],j=f[1],v=Object(o.useState)(""),O=Object(c.a)(v,2),g=O[0],x=O[1],w=Object(o.useState)(""),C=Object(c.a)(w,2),N=C[0],S=C[1],k=Object(o.useState)(null),T=Object(c.a)(k,2),D=T[0],A=T[1],y=Object(o.useState)(null),M=Object(c.a)(y,2),L=M[0],P=M[1],I=Object(o.useState)(null),E=Object(c.a)(I,2),F=E[0],J=E[1];Object(o.useEffect)((function(){J("Loading..."),p.getAll().then((function(e){a(e),J(null)})).catch((function(e){P("A network error occurred while connecting to the server..."),J("A network error occurred while connecting to the server..."),setTimeout((function(){P(null)}),5e3)}))}),[]);var B=t&&t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(s,{text:"Phonebook",component:"h1"}),Object(u.jsx)(l,{successMessage:D,errorMessage:L}),Object(u.jsx)(i,{search:N,handleSearchChange:function(e){e.preventDefault(),S(e.target.value)}}),Object(u.jsx)(s,{text:"Add new person",component:"h2"}),Object(u.jsx)(d,{newName:m,handleNameChange:function(e){e.preventDefault(),j(e.target.value)},newNumber:g,handleNumberChange:function(e){e.preventDefault(),x(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===m.toLowerCase()}))[0];if(""===m||""===g)return P("Please fill the fields."),void setTimeout((function(){P(null)}),5e3);if(n&&n.name===m){if(n.number!==g&&window.confirm('"'.concat(n.name,'" is already added to phonebook, replace the old number "').concat(n.number,'" with the new number "').concat(g,'" ?'))){var c=Object(r.a)(Object(r.a)({},n),{},{number:g});return void p.update(c.id,c).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e}))),A('Updated "'.concat(c.name,'" number "').concat(c.number,'" to "').concat(g,'"')),setTimeout((function(){A(null)}),5e3),j(""),x("")})).catch((function(e){var n;P("A network error occurred while connecting to the server...",null===(n=e.response)||void 0===n?void 0:n.statusText),setTimeout((function(){P(null)}),5e3)}))}return P('"'.concat(m,'" is already added to phonebook with number "').concat(n.number,'"')),void setTimeout((function(){P(null)}),5e3)}var o={name:m,number:g,date:(new Date).toISOString(),id:t.length+1};p.create(o).then((function(e){a(t.concat(e)),A('Added "'.concat(e.name,'" with number "').concat(e.number,'"')),setTimeout((function(){A(null)}),5e3),j(""),x("")})).catch((function(e){var n;console.log(Object(r.a)({},e)),P('A network error occurred while adding "'.concat(o.name,'" ...'),null===(n=e.response)||void 0===n?void 0:n.statusText),setTimeout((function(){P(null)}),5e3)}))}}),Object(u.jsx)(s,{text:"Numbers",component:"h2"}),Object(u.jsx)(b,{persons:B,handleDelete:function(e){window.confirm('Delete "'.concat(e.name,'" ?'))&&p.remove(e.id).then((function(n){if(n.error)return P('Information of "'.concat(e.name,"\" has already been removed from server or doesn't exist on the server")),setTimeout((function(){P(null)}),5e3),a(t.filter((function(n){return n.id!==e.id}))),j(""),void x("");a(t.filter((function(n){return n.id!==e.id}))),A("Deleted ".concat(e.name,'" with number "').concat(e.number,'"')),setTimeout((function(){A(null)}),5e3)})).catch((function(n){var t;P('A network error occurred while deleting "'.concat(e.name,'" ...'),null===(t=n.response)||void 0===t?void 0:t.statusText),setTimeout((function(){P(null)}),5e3)}))},loadingMessage:F})]})}),O=t(15);t.n(O).a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3a637dae.chunk.js.map