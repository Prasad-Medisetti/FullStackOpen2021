(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{36:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(6),c=t(3),o=t(1),a=t.n(o),u=t(0),i=function(e){var n=e.search,t=e.handleSearchChange;return Object(u.jsx)("div",{children:Object(u.jsx)("input",{className:"search",placeholder:"Search",type:"search",value:n,onChange:t})})},s=function(e){var n=e.text,t=e.component||"div";return Object(u.jsx)(t,{style:{paddingLeft:".5em"},children:n})},l=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:Object(u.jsx)("div",{className:"message ".concat(n?"success":"error"),children:n||t})},d=function(e){var n=e.newName,t=e.handleNameChange,r=e.addPerson,c=e.newNumber,o=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsx)("input",{placeholder:"Name",value:n,onChange:t}),Object(u.jsx)("input",{placeholder:"Number",value:c,onChange:o}),Object(u.jsx)("button",{type:"submit",children:"Add"})]})},h=function(e){var n=e.person,t=e.handleDelete;return Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:n.name}),Object(u.jsx)("span",{children:n.number}),Object(u.jsx)("span",{children:Object(u.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})})]})},b=function(e){var n=e.persons,t=e.handleDelete,r=e.loadingMessage;return Object(u.jsx)(u.Fragment,{children:n.length>0?Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)(h,{person:e,handleDelete:t},e.id)}))}):Object(u.jsx)("p",{children:r||"No Contacts ..."})})},f=t(4),j=t.n(f),m="/api/persons",p={getAll:function(){return j.a.get(m).then((function(e){return e.data}))},create:function(e){return j.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},O=(t(36),function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],a=n[1],h=Object(o.useState)(""),f=Object(c.a)(h,2),j=f[0],m=f[1],O=Object(o.useState)(""),v=Object(c.a)(O,2),g=v[0],x=v[1],w=Object(o.useState)(""),C=Object(c.a)(w,2),N=C[0],S=C[1],D=Object(o.useState)(null),k=Object(c.a)(D,2),T=k[0],y=k[1],A=Object(o.useState)(null),M=Object(c.a)(A,2),L=M[0],I=M[1],P=Object(o.useState)(null),E=Object(c.a)(P,2),F=E[0],J=E[1];Object(o.useEffect)((function(){J("Loading..."),p.getAll().then((function(e){a(e),J(null)})).catch((function(e){I("A network error occurred while connecting to the server..."),J("A network error occurred while connecting to the server..."),setTimeout((function(){I(null)}),5e3)}))}),[]);var B=t&&t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(s,{text:"Phonebook",component:"h1"}),Object(u.jsx)(l,{successMessage:T,errorMessage:L}),Object(u.jsx)(i,{search:N,handleSearchChange:function(e){e.preventDefault(),S(e.target.value)}}),Object(u.jsx)(s,{text:"Add new person",component:"h2"}),Object(u.jsx)(d,{newName:j,handleNameChange:function(e){e.preventDefault(),m(e.target.value)},newNumber:g,handleNumberChange:function(e){e.preventDefault(),x(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===j.toLowerCase()}))[0];if(n&&n.name===j){if(n.number!==g&&window.confirm('"'.concat(n.name,'" is already added to phonebook, replace the old number "').concat(n.number,'" with the new number "').concat(g,'" ?'))){var c=Object(r.a)(Object(r.a)({},n),{},{number:g});return void p.update(c.id,c).then((function(e){var n=t.find((function(n){return n.id===e.id}));a(t.map((function(n){return n.id!==e.id?n:e}))),y('Updated "'.concat(n.name,'" number "').concat(n.number,'" to "').concat(g,'"')),setTimeout((function(){y(null)}),5e3),m(""),x("")})).catch((function(e){I(e.response.data.error),setTimeout((function(){I(null)}),5e3)}))}return I('"'.concat(j,'" is already added to phonebook with number "').concat(n.number,'"')),void setTimeout((function(){I(null)}),5e3)}var o={name:j,number:g,date:(new Date).toISOString(),id:t.length+1};p.create(o).then((function(e){a(t.concat(e)),y('Added "'.concat(e.name,'" with number "').concat(e.number,'"')),setTimeout((function(){y(null)}),5e3),m(""),x("")})).catch((function(e){I(e.response.data.error),setTimeout((function(){I(null)}),5e3)}))}}),Object(u.jsx)(s,{text:"Numbers",component:"h2"}),Object(u.jsx)(b,{persons:B,handleDelete:function(e){window.confirm('Delete "'.concat(e.name,'" ?'))&&p.remove(e.id).then((function(n){if(n.error)return I('Information of "'.concat(e.name,"\" has already been removed from server or doesn't exist on the server")),setTimeout((function(){I(null)}),5e3),a(t.filter((function(n){return n.id!==e.id}))),m(""),void x("");a(t.filter((function(n){return n.id!==e.id}))),y("Deleted ".concat(e.name,'" with number "').concat(e.number,'"')),setTimeout((function(){y(null)}),5e3)})).catch((function(n){404===n.response.status&&a(t.filter((function(n){return n.id!==e.id}))),I(n.response.data.error),setTimeout((function(){I(null)}),5e3)}))},loadingMessage:F})]})}),v=t(15);t.n(v).a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5b97daf2.chunk.js.map